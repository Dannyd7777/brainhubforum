<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Forum/Blog</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            background-color: #000;
            color: #fff;
            overflow: hidden;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #000;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #cc00cc, #660066);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #660066, #990099);
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: #000;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(255, 0, 255, 0.5);
            height: 100vh;
            position: fixed;
            overflow-y: auto;
        }

        .sidebar h2 {
            margin-top: 0;
            color: #cc00cc;
            border: 2px solid #cc00cc;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 10px 0;
            border: 1px solid #cc00cc;
            padding: 5px;
            border-radius: 5px;
        }

        .sidebar ul li a {
            text-decoration: none;
            color: #cc00cc;
            padding: 10px;
            display: block;
            border-radius: 5px;
            transition: transform 0.3s ease;
        }

        .sidebar ul li a:hover {
            background-color: #660066;
            color: #fff;
        }

        .sidebar ul li:hover {
            transform: scale(1.05);
        }

        /* Main Content Styles */
        .main-content {
            margin-left: 270px;
            padding: 20px;
            width: calc(100% - 270px);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
            height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .main-content h1 {
            font-size: 3.5rem;
            color: transparent;
            -webkit-text-stroke: 2px #fff;
            text-align: center;
            margin-top: 0;
            position: relative;
        }

        .main-content h1::after {
            content: "";
            position: absolute;
            bottom: -20px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #fff;
        }

        .main-content p {
            line-height: 1.6;
            text-align: center;
            max-width: 800px;
        }

        /* Post Form Styles */
        #post-form {
            background-color: #000;
            border: 2px solid #cc00cc;
            border-radius: 20px;
            padding: 20px;
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #post-text {
            background-color: #000;
            color: #fff;
            border: 2px solid #cc00cc;
            border-radius: 20px;
            width: 90%;
            padding: 10px;
            font-family: Arial, sans-serif;
            font-size: 16px;
        }

        #post-form .button-row {
            display: flex;
            justify-content: space-evenly;
            width: 100%;
            margin-top: 10px;
        }

        #post-form button {
            background-color: #cc00cc;
            border: none;
            color: #fff;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #post-form button:hover {
            background-color: #660066;
        }

        /* Post Layout */
        .post {
            width: 100%;
            max-width: 800px;
            background-color: #1a1a1a;
            border: 2px solid #cc00cc;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .post .delete-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #cc00cc;
            border: none;
            color: #fff;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            text-align: center;
            font-size: 16px;
            line-height: 25px;
        }

        .post .delete-button:hover {
            background-color: #660066;
        }

        .post-body {
            margin-bottom: 10px;
            color: #fff;
            width: 90%;
            text-align: center;
        }

        .post-date {
            font-size: 12px;
            color: #999;
            margin-bottom: 10px;
            text-align: right;
            width: 90%;
        }

        .post-actions {
            display: flex;
            justify-content: flex-start;
        }

        .post-actions button {
            background-color: #cc00cc;
            border: none;
            color: #fff;
            padding: 10px 20px;
            margin: 5px 0;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .post-actions button:hover {
            background-color: #660066;
        }

        .reply {
            background-color: #000;
            border: 2px solid #cc00cc;
            border-radius: 20px;
            padding: 20px;
            width: 100%;
            max-width: 800px;
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .reply textarea {
            background-color: #000;
            color: #fff;
            border: 2px solid #cc00cc;
            border-radius: 20px;
            width: 90%;
            padding: 10px;
            font-family: Arial, sans-serif;
            resize: none;
        }

        .reply button {
            background-color: #cc00cc;
            border: none;
            color: #fff;
            padding: 10px 20px;
            margin-top: 10px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .reply button:hover {
            background-color: #660066;
        }

    </style>
</head>
<body>
    <div class="sidebar">
        <h2>Semester 1</h2>
        <ul>
            <li><a href="?topic=einfuehrung-in-die-informatik">EinfÃ¼hrung in die Informatik</a></li>
            <li><a href="?topic=business-mathematik">Business Mathematik</a></li>
            <li><a href="?topic=projektmanagement">Projektmanagement</a></li>
            <li><a href="?topic=requirements-engineering">Requirements Engineering</a></li>
            <li><a href="?topic=wissenschaftliches-arbeiten-1">Wissenschaftliches Arbeiten 1</a></li>
        </ul>
        <h2>Semester 2</h2>
        <ul>
            <li><a href="?topic=grundlagen-der-programmierung">Grundlagen der Programmierung</a></li>
            <li><a href="?topic=allgemeine-bwl">Allgemeine BWL</a></li>
            <li><a href="?topic=datenschutz">Datenschutz</a></li>
            <li><a href="?topic=software-engineering">Software Engineering</a></li>
            <li><a href="?topic=wissenschaftliches-arbeiten-2">Wissenschaftliches Arbeiten 2</a></li>
            <li><a href="?topic=englisch">Englisch</a></li>
        </ul>
        <h2>Semester 3</h2>
        <ul>
            <li><a href="?topic=software-ergonomie">Software-Ergonomie</a></li>
            <li><a href="?topic=empirische-methoden">Empirische Methoden</a></li>
            <li><a href="?topic=product-lifecycle-management">Produktlebenszyklus-Management</a></li>
            <li><a href="?topic=softwareproduktentwicklung">Software-Produktentwicklung</a></li>
            <li><a href="?topic=moderation-und-fuehrung">Moderation und FÃ¼hrung</a></li>
        </ul>
    </div>

    <div class="main-content">
        <h1 id="topic-header">General</h1>
        <p>Discuss the topic here. You can post comments, upload files, and engage with others.</p>

        <form id="post-form">
            <textarea id="post-text" rows="4" placeholder="Write your post here..." required></textarea><br>
            <div class="button-row">
                <button type="button" id="upload-pic">ðŸ“· Upload Picture</button>
                <button type="button" id="upload-file">ðŸ“„ Upload File</button>
                <button type="submit">Post</button>
            </div>
        </form>

        <div id="posts-section">
            <!-- Posts will appear here -->
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const postForm = document.getElementById("post-form");
            const postsSection = document.getElementById("posts-section");
            const uploadPicButton = document.getElementById("upload-pic");
            const uploadFileButton = document.getElementById("upload-file");
            const topicHeader = document.getElementById("topic-header");

            // Get topic from URL
            const urlParams = new URLSearchParams(window.location.search);
            const topic = urlParams.get("topic");

            // Valid topics
            const validTopics = {
                "einfuehrung-in-die-informatik": "EinfÃ¼hrung in die Informatik",
                "business-mathematik": "Business Mathematik",
                "projektmanagement": "Projektmanagement",
                "requirements-engineering": "Requirements Engineering",
                "wissenschaftliches-arbeiten-1": "Wissenschaftliches Arbeiten 1",
                "grundlagen-der-programmierung": "Grundlagen der Programmierung",
                "allgemeine-bwl": "Allgemeine BWL",
                "datenschutz": "Datenschutz",
                "software-engineering": "Software Engineering",
                "wissenschaftliches-arbeiten-2": "Wissenschaftliches Arbeiten 2",
                "englisch": "Englisch",
                "software-ergonomie": "Software-Ergonomie",
                "empirische-methoden": "Empirische Methoden",
                "product-lifecycle-management": "Produktlebenszyklus-Management",
                "softwareproduktentwicklung": "Software-Produktentwicklung",
                "moderation-und-fuehrung": "Moderation und FÃ¼hrung",
            };

            // Set topic header based on valid topics or default to "General"
            if (topic && validTopics[topic]) {
                topicHeader.innerText = validTopics[topic];
            } else {
                topicHeader.innerText = "General";
            }

            // Initialize upload button functionality
            const initializeUploadButtons = () => {
                uploadPicButton.addEventListener("click", () => {
                    alert(`Picture upload functionality coming soon for topic: ${topic || "general"}`);
                });

                uploadFileButton.addEventListener("click", () => {
                    alert(`File upload functionality coming soon for topic: ${topic || "general"}`);
                });
            };

            // Load posts for the current topic from local storage
            const loadPosts = () => {
                const posts = JSON.parse(localStorage.getItem(topic || "general")) || [];
                posts.forEach((post) => {
                    createPostElement(post.text, post.date, post.replies);
                });
            };

            // Save posts for the current topic to local storage
            const savePosts = () => {
                const posts = [];
                document.querySelectorAll(".post").forEach((post) => {
                    const text = post.querySelector(".post-body").textContent;
                    const date = post.querySelector(".post-date").textContent;
                    const replies = Array.from(post.querySelectorAll(".reply div")).map(
                        (reply) => reply.textContent
                    );
                    posts.push({ text, date, replies });
                });
                localStorage.setItem(topic || "general", JSON.stringify(posts));
            };

            // Create a post element
            const createPostElement = (postText, postDate = new Date().toLocaleString(), replies = []) => {
                const postDiv = document.createElement("div");
                postDiv.className = "post";

                const deleteButton = document.createElement("button");
                deleteButton.className = "delete-button";
                deleteButton.textContent = "Ã—";
                deleteButton.onclick = () => {
                    postDiv.remove();
                    savePosts();
                };
                postDiv.appendChild(deleteButton);

                const postBody = document.createElement("div");
                postBody.className = "post-body";
                postBody.textContent = postText;
                postDiv.appendChild(postBody);

                const postDateDiv = document.createElement("div");
                postDateDiv.className = "post-date";
                postDateDiv.textContent = postDate;
                postDiv.appendChild(postDateDiv);

                const actionsDiv = document.createElement("div");
                actionsDiv.className = "post-actions";

                const replyButton = document.createElement("button");
                replyButton.textContent = "Reply";
                replyButton.onclick = () => {
                    const replyDiv = document.createElement("div");
                    replyDiv.className = "reply";

                    const replyTextarea = document.createElement("textarea");
                    replyTextarea.rows = 2;
                    replyTextarea.placeholder = "Write your reply here...";

                    const replySubmit = document.createElement("button");
                    replySubmit.textContent = "Submit";
                    replySubmit.onclick = () => {
                        const replyText = replyTextarea.value;
                        const replyContent = document.createElement("div");
                        replyContent.textContent = replyText;
                        replyDiv.appendChild(replyContent);
                        replyDiv.removeChild(replyTextarea);
                        replyDiv.removeChild(replySubmit);
                        savePosts();
                    };

                    replyDiv.appendChild(replyTextarea);
                    replyDiv.appendChild(replySubmit);
                    postDiv.appendChild(replyDiv);
                };

                actionsDiv.appendChild(replyButton);
                postDiv.appendChild(actionsDiv);

                replies.forEach((replyText) => {
                    const replyDiv = document.createElement("div");
                    replyDiv.className = "reply";
                    const replyContent = document.createElement("div");
                    replyContent.textContent = replyText;
                    replyDiv.appendChild(replyContent);
                    postDiv.appendChild(replyDiv);
                });

                postsSection.appendChild(postDiv);
            };

            postForm.addEventListener("submit", (e) => {
                e.preventDefault();

                const postText = document.getElementById("post-text").value;
                createPostElement(postText);
                savePosts();

                // Reset form
                postForm.reset();
            });
